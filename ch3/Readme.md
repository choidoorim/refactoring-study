# Ch3 - 코드에서 나는 악취
## 3.1 기이한 이름
- 코드를 명료하게 표현할 수 있는 것이 바로 함수, 모듈, 변수, 클래스 등의 이름이다.
- 이름을 잘 짓는 것만으로도 문맥을 쉽게 파악할 수 있다.
- 마땅한 이름이 떠오르지 않는다면 설계에 문제가 있는지 고민해보자.

## 3.2 중복코드
- 똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합해서 더 나은 프로그램을 만들 수 있다.

## 3.3 긴 함수
- 보통 오랜 기간 잘 활용되는 프로그램들은 짧은 함수들로 코드가 끝없이 위임하는 방식으로 작성되어 있는 코드들로 이뤄져있다.
- 간접 호출의 효과 - 즉 코드를 이해하고, 공유하고, 선택하기 쉬워진다는 장점을 함수를 짧게 구성할 때 나오는 것이다.
- 짧은 코드로 작성된 함수들이 많을 경우 함수가 하는 일을 파악해야되기 때문에 번거로울 수 있지만, 이를 해결하기 위한 방법이 바로 이름을 잘 짓는 것이다. 
- 주석을 달아야 한다면 주석보다는 그 부분까지 함수화 시키는 것을 고려해보자.

## 3.4 긴 매개변수 목록
- 매개변수를 질의 함수로 바꾸기, 매개변수 객체 만들기, 플래그 인수 제거하기, 여러 함수를 클래스로 묶기 등을 통해 매개변수 목록을 줄일 수 있다.

## 3.5 전역 데이터
- 전역 데이터는 코드베이스 어디에서든 조작이 가능하고, 값을 누가 바꿨는지 찾아낼 방법이 없다는 큰 문제가 있다. 따라서 버그는 끊임 없이 발생되는데, 그 원인이 되는 코드를 찾아내기가 상당히 힘들다.
- 대표적으로 변수 캡슐화를 통해 다른 코드에서 오염시킬 가능성이 있는 데이터는 이 기법을 적용시킨다. 

## 3.6 가변 데이터
- 변수 캡술화를 통해 정해놓은 함수를 통해서만 값을 수정할 수 있도록 하면 값이 어떻게 수정되는지 감시하거나, 코드를 개선하기 쉬워진다.
- 가변 데이터는 유효범위가 넓어지면 넓어질수록 위험도 덩달아 커지게 된다. 따라서 **여러 함수를 클래스로 묶거**나 **여러 함수를 변환 함수로 묶기**를 활용해서 변수를 갱신하는 코드들의 유효범위를 제한해야 한다.

## 3.7 뒤엉킨 변경
- [단일 책임원칙](https://ko.wikipedia.org/wiki/%EB%8B%A8%EC%9D%BC_%EC%B1%85%EC%9E%84_%EC%9B%90%EC%B9%99) 이 제대로 지켜지지 않을 때 발생한다. 즉, 하나의 모듈이 서로 다른 이유들로 인해 여러 가지 방식으로 변경되는 일이 많을 때 발생한다.
- 어떠한 비지니스 로직을 해결하기 위한 전체 처리 과정중 각기 다른 맥락의 함수를 호출하는 빈도가 높다면, 각 맥락에 해당하는 적당한 모듈들을 만들어서 관련 함수들을 모아야 한다. 그렇게 된다면 처리 과정이 맥락별로 구분이 된다.

## 3.8 산탄총 수술
- 함께 변경되는 대상들은 함수 옮기기와 필드 옮기기로 모두 한 모듈에 묶어두면 좋다.
- 비슷한 데이터를 다루는 함수가 많다면 여러 함수를 클래스로 묶기를 적용한다.

## 3.9 기능 편애
- 다른 모듈의 함수나 데이터와 상호작용이 많을 때 발생하는 것이 **기능 편애** 이다.
- 프로그램 모듈화를 할 때는 코드를 여러 영역으로 나눈 뒤 **영역 안에서 이뤄지는 상호작용은 최대한 늘리고**, **영역 사이에서 이뤄지는 상호작용은 최소로 줄이는 데** 주력해야 한다.
- 만약 함수가 사용하는 모듈이 다양하다면 **가장 많은 데이터를 포함한 모듈**로 함수를 옮기면 된다. 
